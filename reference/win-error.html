<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Winsorize a numeric vector — winsorize • staccuracy</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Winsorize a numeric vector — winsorize"><meta name="description" content="Winsorization means truncating the extremes of a numeric range by replacing extreme values with a predetermined minimum and maximum. winsorize() returns the input vector values with values less than or greater than the provided minimum or maximum replaced by the provided minimum or maximum, respectively.
win_mae() and win_rmse() return MAE and RMSE respectively with winsorized predictions. The fundamental idea underlying the winsorization of predictions is that if the actual data has well-defined bounds, then models should not be penalized for being overzealous in predicting beyond the extremes of the data. Models that are overzealous in the boundaries might sometimes be superior within normal ranges; the extremes can be easily corrected by winsorization."><meta property="og:description" content="Winsorization means truncating the extremes of a numeric range by replacing extreme values with a predetermined minimum and maximum. winsorize() returns the input vector values with values less than or greater than the provided minimum or maximum replaced by the provided minimum or maximum, respectively.
win_mae() and win_rmse() return MAE and RMSE respectively with winsorized predictions. The fundamental idea underlying the winsorization of predictions is that if the actual data has well-defined bounds, then models should not be penalized for being overzealous in predicting beyond the extremes of the data. Models that are overzealous in the boundaries might sometimes be superior within normal ranges; the extremes can be easily corrected by winsorization."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">staccuracy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.20241107</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tripartio/staccuracy/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Winsorize a numeric vector</h1>
      <small class="dont-index">Source: <a href="https://github.com/tripartio/staccuracy/blob/main/R/regression.R" class="external-link"><code>R/regression.R</code></a></small>
      <div class="d-none name"><code>win-error.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Winsorization means truncating the extremes of a numeric range by replacing extreme values with a predetermined minimum and maximum. <code>winsorize()</code> returns the input vector values with values less than or greater than the provided minimum or maximum replaced by the provided minimum or maximum, respectively.</p>
<p><code>win_mae()</code> and <code>win_rmse()</code> return MAE and RMSE respectively with winsorized predictions. The fundamental idea underlying the winsorization of predictions is that if the actual data has well-defined bounds, then models should not be penalized for being overzealous in predicting beyond the extremes of the data. Models that are overzealous in the boundaries might sometimes be superior within normal ranges; the extremes can be easily corrected by winsorization.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">winsorize</span><span class="op">(</span><span class="va">x</span>, <span class="va">win_range</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">win_mae</span><span class="op">(</span><span class="va">actual</span>, <span class="va">pred</span>, win_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">actual</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">win_rmse</span><span class="op">(</span><span class="va">actual</span>, <span class="va">pred</span>, win_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">actual</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>numeric vector.</p></dd>


<dt id="arg-win-range">win_range<a class="anchor" aria-label="anchor" href="#arg-win-range"></a></dt>
<dd><p>numeric(2). The minimum and maximum allowable values for the <code>pred</code> predictions or for <code>x</code>. For functions with <code>pred</code>, <code>win_range</code> defaults to the minimum and maximum values of the provided <code>actual</code> values. For functions with <code>x</code>, there is no default.</p></dd>


<dt id="arg-actual">actual<a class="anchor" aria-label="anchor" href="#arg-actual"></a></dt>
<dd><p>numeric vector. Actual (true) values of target outcome data.</p></dd>


<dt id="arg-pred">pred<a class="anchor" aria-label="anchor" href="#arg-pred"></a></dt>
<dd><p>numeric vector. Predictions corresponding to each respective element in <code>actual</code>.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>logical(1). <code>TRUE</code> if missing values should be removed; <code>FALSE</code> if they should be retained. If <code>TRUE</code>, then if any element of either <code>actual</code> or <code>pred</code> is missing, its paired element will be also removed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>winsorize()</code> returns a winsorized vector.</p>
<p><code>win_mae()</code> returns the mean absolute error (MAE) of winsorized predicted values <code>pred</code> compared to the <code>actual</code> values. See <code><a href="reg-error.html">mae()</a></code> for details.</p>
<p><code>win_rmse()</code> returns the root mean squared error (RMSE) of winsorized predicted values <code>pred</code> compared to the <code>actual</code> values. See <code><a href="reg-error.html">rmse()</a></code> for details.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span>, <span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">5.5</span>, <span class="fl">1.5</span>, <span class="fl">6.5</span>, <span class="fl">10.5</span>, <span class="fl">3.5</span>, <span class="fl">6</span>, <span class="fl">7.5</span>, <span class="fl">0.5</span>, <span class="fl">11.5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">a</span>  <span class="co"># the original data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  3  5  2  7  9  4  6  8  2 10</span>
<span class="r-in"><span><span class="fu">winsorize</span><span class="op">(</span><span class="va">a</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span>  <span class="co"># a winsorized on defined boundaries</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 3 5 2 7 8 4 6 8 2 8</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># range of the original data</span></span></span>
<span class="r-in"><span><span class="va">a</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  3  5  2  7  9  4  6  8  2 10</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  2 10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># some overzealous predictions</span></span></span>
<span class="r-in"><span><span class="va">p</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  2.5  5.5  1.5  6.5 10.5  3.5  6.0  7.5  0.5 11.5</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  0.5 11.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># MAE penalizes overzealous predictions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="reg-error.html">mae</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.75</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Winsorized MAE forgives overzealous predictions</span></span></span>
<span class="r-in"><span><span class="fu">win_mae</span><span class="op">(</span><span class="va">a</span>, <span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.35</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># RMSE penalizes overzealous predictions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="reg-error.html">rmse</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9082951</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Winsorized RMSE forgives overzealous predictions</span></span></span>
<span class="r-in"><span><span class="fu">win_rmse</span><span class="op">(</span><span class="va">a</span>, <span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.4743416</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chitu Okoli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

