<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Statistical tests for the differences between standardized accuracies (staccuracies) — sa_diff • staccuracy</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Statistical tests for the differences between standardized accuracies (staccuracies) — sa_diff"><meta name="description" content="Because the distribution of staccuracies is uncertain (and indeed, different staccuracies likely have different distributions), bootstrapping is used to empirically estimate the distributions and calculate the p-values. See the return value description for details on what the function provides."><meta property="og:description" content="Because the distribution of staccuracies is uncertain (and indeed, different staccuracies likely have different distributions), bootstrapping is used to empirically estimate the distributions and calculate the p-values. See the return value description for details on what the function provides."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">staccuracy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tripartio/staccuracy/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Statistical tests for the differences between standardized accuracies (staccuracies)</h1>
      <small class="dont-index">Source: <a href="https://github.com/tripartio/staccuracy/blob/main/R/staccuracy.R" class="external-link"><code>R/staccuracy.R</code></a></small>
      <div class="d-none name"><code>sa_diff.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Because the distribution of staccuracies is uncertain (and indeed, different staccuracies likely have different distributions), bootstrapping is used to empirically estimate the distributions and calculate the p-values. See the return value description for details on what the function provides.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sa_diff</span><span class="op">(</span></span>
<span>  <span class="va">actual</span>,</span>
<span>  <span class="va">preds</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sa <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.02</span>, <span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  boot_alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  boot_it <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-actual">actual<a class="anchor" aria-label="anchor" href="#arg-actual"></a></dt>
<dd><p>numeric vector. The actual (true) labels.</p></dd>


<dt id="arg-preds">preds<a class="anchor" aria-label="anchor" href="#arg-preds"></a></dt>
<dd><p>named list of at least two numeric vectors. Each element is a vector of the same length as actual with predictions for each row corresponding to each element of actual. The names of the list elements should be the names of the models that produced each respective prediction; these names will be used to distinguish the results.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>not used. Forces explicit naming of subsequent arguments.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>See documentation for <code><a href="staccuracy.html">staccuracy()</a></code></p></dd>


<dt id="arg-sa">sa<a class="anchor" aria-label="anchor" href="#arg-sa"></a></dt>
<dd><p>list of functions. Each element is the unquoted name of a valid staccuracy function (see <code><a href="staccuracy.html">staccuracy()</a></code> for the required function signature.) If an element is named, the name will be displayed as the value of the <code>sa</code> column of the result. Otherwise, the function name will be displayed. If NULL (default), staccuracy functions will be automatically selected based on the datatypes of actual and <code>preds</code>.</p></dd>


<dt id="arg-pct">pct<a class="anchor" aria-label="anchor" href="#arg-pct"></a></dt>
<dd><p>numeric with values from (0, 1). The percentage values on which the difference in staccuracies will be tested.</p></dd>


<dt id="arg-boot-alpha">boot_alpha<a class="anchor" aria-label="anchor" href="#arg-boot-alpha"></a></dt>
<dd><p>numeric(1) from 0 to 1. Alpha for percentile-based confidence interval range for the bootstrapped means; the bootstrap confidence intervals will be the lowest and highest <code>(1 - 0.05) / 2</code> percentiles. For example, if <code>boot_alpha = 0.05</code> (default), the intervals will be at the 2.5 and 97.5 percentiles.</p></dd>


<dt id="arg-boot-it">boot_it<a class="anchor" aria-label="anchor" href="#arg-boot-it"></a></dt>
<dd><p>positive integer(1). The number of bootstrap iterations.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>integer(1). Random seed for the bootstrap sampling. Supply this between runs to assure identical results.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>tibble with staccuracy difference results:</p><ul><li><p><code>staccuracy</code>: name of staccuracy measure</p></li>
<li><p><code>pred</code>: Each named element (model name) in the input <code>preds</code>. The row values give the staccuracy for that prediction. When <code>pred</code> is <code>NA</code>, the row represents the difference between prediction staccuracies (<code>diff</code>) instead of  staccuracies themselves.</p></li>
<li><p><code>diff</code>: When <code>diff</code> takes the form 'model1-model2', then the row values give the difference in staccuracies between two named elements (model names) in the input <code>preds</code>. When <code>diff</code> is <code>NA</code>, the row instead represents the staccuracy of a specific model prediction (<code>pred</code>).</p></li>
<li><p><code>lo</code>, <code>mean</code>, <code>hi</code>: The lower bound, mean, and upper bound of the bootstrapped staccuracy. The lower and upper bounds are confidence intervals specified by the input <code>boot_alpha</code>.</p></li>
<li><p><code>p__</code>: p-values that the difference in staccuracies are at least the specified percentage amount or greater.  E.g., for the default input <code>pct = c(0.01, 0.02, 0.03, 0.04, 0.05)</code>, these columns would be <code>p01</code>, <code>p02</code>, <code>p03</code>, <code>p04</code>, and  <code>p05</code>. As they apply only to differences between staccuracies, they are provided only for <code>diff</code> rows and are <code>NA</code> for <code>pred</code> rows. As an example of their meaning, if the <code>mean</code> difference for 'model1-model2' is 0.0832 with <code>p01</code> of 0.012 and <code>p02</code> of 0.035, then 1.2% of bootstrapped staccuracies had a model1 - model2 difference of less than 0.01 and 3.5% were less than 0.02. (That is, 98.8% of differences were greater than 0.01 and 96.5% were greater than 0.02.)</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">lm_attitude_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">rating</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">attitude</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lm_attitude__a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">rating</span> <span class="op">~</span> <span class="va">.</span> <span class="op">-</span> <span class="va">advance</span>, data <span class="op">=</span> <span class="va">attitude</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lm_attitude__c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">rating</span> <span class="op">~</span> <span class="va">.</span> <span class="op">-</span> <span class="va">complaints</span>, data <span class="op">=</span> <span class="va">attitude</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sdf</span> <span class="op">&lt;-</span> <span class="fu">sa_diff</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">attitude</span><span class="op">$</span><span class="va">rating</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    all <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lm_attitude_all</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    madv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lm_attitude__a</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    mcmp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">lm_attitude__c</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  boot_it <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sdf</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    staccuracy    pred  diff            lo    mean     hi     p01     p02     p03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> WinMAE on MAD all   <span style="color: #BB0000;">NA</span>         0.672   0.719   0.776  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> WinMAE on MAD madv  <span style="color: #BB0000;">NA</span>         0.640   0.705   0.767  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> WinMAE on MAD mcmp  <span style="color: #BB0000;">NA</span>         0.586   0.635   0.692  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> WinMAE on MAD <span style="color: #BB0000;">NA</span>    all-madv  -<span style="color: #BB0000;">0.006</span><span style="color: #BB0000; text-decoration: underline;">60</span> 0.013<span style="text-decoration: underline;">9</span>  0.036<span style="text-decoration: underline;">9</span>  0.455   0.727   0.818 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> WinMAE on MAD <span style="color: #BB0000;">NA</span>    all-mcmp   0.044<span style="text-decoration: underline;">0</span>  0.084<span style="text-decoration: underline;">0</span>  0.133   0.090<span style="text-decoration: underline;">9</span>  0.090<span style="text-decoration: underline;">9</span>  0.090<span style="text-decoration: underline;">9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> WinMAE on MAD <span style="color: #BB0000;">NA</span>    madv-mcmp  0.029<span style="text-decoration: underline;">1</span>  0.070<span style="text-decoration: underline;">2</span>  0.122   0.090<span style="text-decoration: underline;">9</span>  0.090<span style="text-decoration: underline;">9</span>  0.182 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> WinRMSE on SD all   <span style="color: #BB0000;">NA</span>         0.684   0.737   0.781  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> WinRMSE on SD madv  <span style="color: #BB0000;">NA</span>         0.670   0.732   0.782  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> WinRMSE on SD mcmp  <span style="color: #BB0000;">NA</span>         0.616   0.670   0.723  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> WinRMSE on SD <span style="color: #BB0000;">NA</span>    all-madv  -<span style="color: #BB0000;">0.007</span><span style="color: #BB0000; text-decoration: underline;">81</span> 0.005<span style="text-decoration: underline;">29</span> 0.027<span style="text-decoration: underline;">2</span>  0.636   0.909   0.909 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> WinRMSE on SD <span style="color: #BB0000;">NA</span>    all-mcmp   0.033<span style="text-decoration: underline;">5</span>  0.066<span style="text-decoration: underline;">6</span>  0.107   0.090<span style="text-decoration: underline;">9</span>  0.090<span style="text-decoration: underline;">9</span>  0.182 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> WinRMSE on SD <span style="color: #BB0000;">NA</span>    madv-mcmp  0.027<span style="text-decoration: underline;">3</span>  0.061<span style="text-decoration: underline;">3</span>  0.108   0.090<span style="text-decoration: underline;">9</span>  0.090<span style="text-decoration: underline;">9</span>  0.182 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: p04 &lt;dbl&gt;, p05 &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chitu Okoli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

